<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Hearing Tracker</title>
    <style>
      body { font-family: Arial, Helvetica, sans-serif; max-width:1000px; margin:20px auto; padding:0 16px; }
      h1 { font-size:1.4rem; }
      .grid { display:flex; gap:20px; align-items:flex-start; }
      .card { background:#fff; border:1px solid #ddd; padding:12px; border-radius:6px; box-shadow:0 1px 2px rgba(0,0,0,0.03); }
      table { border-collapse:collapse; width:100%; }
      td, th { padding:6px 8px; border-bottom:1px solid #eee; }
      input[type="number"]{ width:100%; box-sizing:border-box; padding:6px; }
      button { padding:8px 12px; margin-top:8px; }
      #appointmentsList { list-style:none; padding:0; margin:0; }
      #appointmentsList li { padding:6px 0; display:flex; justify-content:space-between; align-items:center; border-bottom:1px dashed #f0f0f0; }
      .muted { color:#666; font-size:0.9rem; }
      .small { font-size:0.9rem; }
    </style>
  </head>
  <body>
    <h1>Hearing Tracker â€” Appointments & Flow Chart</h1>
    <p class="muted">Enter a date and the hearing levels (dB) for each frequency. The chart will show change across appointments.</p>

    <div class="grid">
      <div class="card" style="flex:0 0 360px;">
        <label for="apptDate">Appointment date</label>
        <input id="apptDate" type="date" />

        <h3 class="small">Frequencies (Hz)</h3>
        <table>
          <thead>
            <tr><th>Frequency</th><th>Hearing level (dB)</th></tr>
          </thead>
          <tbody id="freqTable">
            <!-- rows added by JS -->
          </tbody>
        </table>

        <button id="addAppt">Add appointment</button>
        <button id="clearAll" style="margin-left:8px;">Clear all</button>

        <h3 class="small" style="margin-top:12px">Saved appointments</h3>
        <ul id="appointmentsList"></ul>
      </div>

      <div style="flex:1 1 500px;" class="card">
        <div style="display:flex;gap:12px;align-items:center;justify-content:space-between;">
          <div class="small"><strong>Note:</strong> The Y-axis orientation is fixed: the bottom of the chart shows the highest (worst) dB values and the top of the chart shows 0 dB (best). Visual upward trends therefore represent improvement. This preference is fixed and cannot be changed.</div>
          <div class="small muted">Orientation: bottom = highest dB, top = 0 dB (fixed)</div>
        </div>
        <canvas id="chart" width="640" height="360"></canvas>
        <p class="muted small">Tip: add multiple appointments to see improvement/deterioration. Colors correspond to frequencies.</p>
      </div>
    </div>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="hearing_tracker.js"></script>
  </body>
</html>
